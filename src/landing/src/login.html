<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
</head>
<body>
    <input type="file" id="login-key-file">
    <input type="text" id="login-username">
    <p id="login-error"></p>
    <button type="button" id="login-submit">Login</button>
    <script type="module">
        import app from "/js/messenger.js";

        // get references to DOM elements
        let keyFile = document.getElementById("login-key-file");
        let username = document.getElementById("login-username");
        let error = document.getElementById("login-error");
        let submit = document.getElementById("login-submit");
        
        function loginHandler() {
            if (app.login()) { // if login is successful
                window.location.replace("/app.html"); // redirect to application
            }
            else {
                // display error
                error.innerHTML = "Login failed. Please check that you are using the correct username and key.";
            }
        }

        submit.addEventListener("click", loginHandler);
    </script>
</body>
</html>